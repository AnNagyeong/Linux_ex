# Linux_ex 프로세스가 호출하는 시스템콜 보기

whatis strace
: strace - 시스템콜 추적 도구

strace -c ls
: strace -c - 실행 종료 후 시스템콜 호출 횟수, 오류, 소요 시간 등 통계 출력
: ls - 추적할 대상 명령어
전체적인 호출 패턴을 파악하거나 성능 분석 시 유용하다.
(-c는 개별 로그가 아닌 통계 요약만 보여줌)
실행이 끝나면 어떤 시스템콜을 몇 번 호출했고, 시간이 얼마나 걸렸는지를 보여줌

strace -o trace.log ls
: -o trace.log - 추적 결과를 지정한 파일에 저장
로그 파일을 저장하여 분석할 때 사용
♥ 디버깅용 로그 수집 기본 패턴 ♥

head -n 50 trace.log
: head -n 50 - 파일의 첫 50줄 출력
: trace.log - strace가 기록한 로그 파일
어떤 시스템콜이 가장 먼저 호출되는지 확인할 수 있다

strace -tt -T -f -e trace=open,read,write ls
: -tt - 마이크로초 단위 시간 표시
: -T - 각 시스템콜이 걸린 시간 출력(느린 원인 찾을 때 핵심)
: -f - 자식 프로세스까지 추적
: -e trace=open,read,write - 특정 시스템콜만 추적
파일 입출력 관련 문제를 디버깅할 때 특히 유용하다.

: quit
----------------------------------------------------------
일부 시스템에서는 권한 문제로 sudo가 필요할 수 있다.
strace는 성능 오버헤드가 크므로, 운영 중인 서비스에는 주의해서 사용!

ls는 
1. 디렉터리 열기(openat)
2. 파일 목록 읽기(getdents)
3. 파일 정보 확인(stat)
4. 화면에 출력(write)
같은 역할을 함. (이 모든 것이 시스템콜)

strace -o trace.log ls은 
"파일 목록을 보여주는 프로그램인 ls가 커널에게 어떤 시스템콜을
하는지 전부 기록해" 라는 뜻

pwd - 현재 경로
cat - 파일 내용 출력
echo - 문자열 출력
